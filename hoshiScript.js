const allQuestions = [
  //! 1 unit
   {
    question: "池田 「では明日、午前11時に駅前で会いましょう。」<br>大木 「午前中は用があるので、_______  _______  ___★___  _______。」",
    options: ["いただけませんか", "午後に", "待ち合わせは", "して"],
    correct: 3
  },
   {
    question: "部屋に入り、目の前の大きな_______  ___★___  _______  _______広がっていた。",
    options: ["海が", "輝く", "開けると", "窓を"],
    correct: 2
  },
   {
    question: "あなたが_______  _______  ___★___  _______助かるのですが。",
    options: ["大変", "くれれば", "この仕事を", "引き受けて"],
    correct: 1
  },
   {
    question: "とてもおなかがすいていたので、注文した料理を食べ_______  ___★___  _______  _______、次の料理を注文した。",
    options: ["の", "うちに", "終わったか", "終わらないか"],
    correct: 3
  },
   {
    question: "私の人生に_______  _______  ___★___  _______娘が生まれた日だ。",
    options: ["最高の", "おける", "今までで", "日とは"],
    correct: 0
  },
  //! 2 unit
   {
    question: "川上 「次は、あの荷物を車に運んでください。」<br>小池 「さっきから、_______  ___★___  _______  _______。」",
    options: ["じゃありませんか", "働いている", "私", "ばかり"],
    correct: 3
  },
   {
    question: "二木 「お休みの日には、何をしていますか。」<br>山本 「そうですね。だいたいゴルフを_______  _______  ___★___  _______多いですね。」",
    options: ["して", "ことが", "いる", "過ごして"],
    correct: 2
  },
   {
    question: "社員 「社長、明日の会合に、_______  _______  ___★___  _______教えていただけますか。」<br>社長 「そうだね。3時ごろ行くよ。」",
    options: ["いらっしゃる", "ご予定", "なのか", "何時ごろ"],
    correct: 1
  },
   {
    question: "さすが森川さんは、学者_______  _______  ___★___  _______を知っている。",
    options: ["あって", "こと", "だけ", "いろいろな"],
    correct: 3
  },
   {
    question: "ある論文によると、今後は、人間に_______  ___★___  _______  _______増えるそうだ。",
    options: ["仕事が", "する", "ロボットが", "かわって"],
    correct: 2
  },
  //! 3 unit
   {
    question: "男の学生 「これから、みんなでカラオケに行こうよ。」<br>女の学生 「悪いけど、頭が痛いから、今日は_______  _______  ___★___  _______",
    options: ["いい", "お願い", "まいります", "よろしく"],
    correct: 1
  },
   {
    question: "少し遅れましたが、今から会場に_______  ___★___  _______  _______いたします。",
    options: ["ので", "お願い", "まいります", "よろしく"],
    correct: 0
  },
   {
    question: "この仕事をするのが、_______  _______  ___★___  _______努力を続ければ、いつかきっとできるようになると信じている。",
    options: ["とても", "しても", "たとえ", "難しいと"],
    correct: 3
  },
   {
    question: "私のミスで、計画が失敗してしまったのだから、_______  _______  ___★___  _______と思い、すぐにメールを送った。",
    options: ["ない", "あやまる", "ほか", "より"],
    correct: 2
  },
   {
    question: "まわりから見ても、彼の彼女に_______  ___★___  _______  _______と思う。",
    options: ["ひどい", "態度は", "ちょっと", "対する"],
    correct: 1
  },
  //! 4 unit
   {
    question: "今日予定されていた運動会は、_______  _______  ___★___  _______なりました。",
    options: ["ため", "延期に", "来週に", "台風の"],
    correct: 2
  },
   {
    question: "中山 「いつ_______  ___★___  _______  _______くれない?」<br>川口 「そうだね。来週の金曜日に来てくれる?」",
    options: ["行けば", "教えて", "そこに", "いいか"],
    correct: 0
  },
   {
    question: "もし、友だちが1人もいなくても、私は_______  _______  ___★___  _______、幸せを感じることができます。",
    options: ["1冊の", "さえ", "あれば", "本"],
    correct: 1
  },
   {
    question: "刑事がその事件に_______  _______  ___★___  _______別の事件が起こった。",
    options: ["調べている", "最中に", "ついて", "くわしく"],
    correct: 0
  },
   {
    question: "この町は、工業都市として大きく発展したが、それに_______  ___★___  _______  _______なっている。",
    options: ["大きく", "ともなう", "ますます", "環境問題も"],
    correct: 3
  },
  //! 5 unit
   {
    question: "入社してから、課長が_______  _______  ___★___  _______、ほかの社員より早く仕事を覚えることができました。",
    options: ["教えて", "くださった", "おかげで", "親切に"],
    correct: 1
  },
   {
    question: "悪いけど、さっき_______  _______  ___★___  _______くれる。",
    options: ["言って", "言っていた", "ことを", "もう一度"],
    correct: 3
  },
   {
    question: "この店の料理は、味も_______  _______  ___★___  _______と思います。",
    options: ["よければ", "最高だ", "きれいで", "見た目も"],
    correct: 2
  },
   {
    question: "長い旅から帰って、親のを_______  _______  ___★___  _______選がこはれてきた。",
    options: ["ぼろぼろ", "とたん", "見た", "一日"],
    correct: 0
  },
   {
    question: "明日の午前10時から、大学のホールで、_______  _______  ___★___  _______です。",
    options: ["講演が", "行われる", "予定", "林先生による"],
    correct: 1
  },
  //! 6 unit
  //    {
  //     question: "チョコレートやケーキなど_______  _______  ___★___  _______、太ってしまった。",
  //     options: ["甘い", "大好きな", "ものが", "せいで"],
  //     correct: 1
  //   },
  //    {
  //     question: "では、部長には、会議で_______  ___★___  _______  _______",
  //     options: ["おけば", "決まった", "ことを", "申し上げて"],
  //     correct: 2
  //   },
  //    {
  //     question: "ちょうど宿題を_______  _______  ___★___  _______友だちがやって来た。",
  //     options: ["している", "と", "しょう", "ところへ"],
  //     correct: 0
  //   },
  //    {
  //     question: "私は、人形が好きなので、_______  _______  ___★___  _______その国の人形を買ってきます。",
  //     options: ["に", "行く", "旅行に", "たび"],
  //     correct: 3
  //   },
  //    {
  //     question: "その動物園には、パンダを_______  _______  ___★___  _______たくさんいる。",
  //     options: ["動物たちが", "はじめ", "かわいい", "とする"],
  //     correct: 2
  //   },
  //   //! 7 unit
  //    {
  //     question: "今日は_______  _______  ___★___  _______、あなたはそうじをしてよ。",
  //     options: ["かわりに", "私が", "晩ごはんを", "作る"],
  //     correct: 3
  //   },
  //    {
  //     question: "田村 「こんにちは。はじめまして。」<br>村上 「はじめまして。_______  ___★___  _______  _______存じます。」",
  //     options: ["うれしく", "お目に", "かかれた", "ことを"],
  //     correct: 2
  //   },
  //    {
  //     question: "私は、何歳になった_______  _______  ___★___  _______働き続けたいです。",
  //     options: ["ある", "限り", "仕事が", "としても"],
  //     correct: 0
  //   },
  //    {
  //     question: "2人は、何度も_______  ___★___  _______  _______ことを決めた。",
  //     options: ["話し合った", "上で", "別れる", "とうとう"],
  //     correct: 1
  //   },
  //    {
  //     question: "これは、現在のわが国の環境問題に_______  _______  ___★___  _______です。",
  //     options: ["新しい", "関する", "資料", "最も"],
  //     correct: 0
  //   },
  //   //! 8 unit
  //    {
  //     question: "水谷 「この機械、どうやって動かすか知ってる?」<br>松井 「私もよくわからないから、説明書に_______  _______  ___★___  _______よ。」",
  //     options: ["通りに", "書いて", "ある", "やってみて"],
  //     correct: 0
  //   },
  //    {
  //     question: "こちらが、私が集めている車のカタログですが、_______  _______  ___★___  _______しますよ。",
  //     options: ["ごらんに", "ようでしたら", "お見せ", "なりたい"],
  //     correct: 1
  //   },
  //    {
  //     question: "この新しいそうじ機は、使い方が_______  _______  ___★___  _______とても便利だ。",
  //     options: ["簡単な", "上", "ので", "軽い"],
  //     correct: 3
  //   },
  //    {
  //     question: "日本人だからといって、だれもがすしや天ぷらが_______  _______  ___★___  _______ない。",
  //     options: ["という", "では", "わけ", "好きだ"],
  //     correct: 2
  //   },
  //    {
  //     question: "若いころの私は、両親の期待_______  _______  ___★___  _______していた。",
  //     options: ["こと", "に", "だけ", "反する"],
  //     correct: 0
  //   },
  // //! 9 unit
  //    {
  //     question: "村田 「アルバイトは見つかった?」<br>本 「それが結局、_______  _______  ___★___  _______、いいアルバイトが見つからなかったんだ。」",
  //     options: ["できない", "車の", "ばかりに", "運転が"],
  //     correct: 0
  //   },
  //    {
  //     question: "ちょうど先生に、会場への行き方を_______  _______  ___★___  _______ところです。",
  //     options: ["さしあげ", "た", "教え", "て"],
  //     correct: 0
  //   },
  //    {
  //     question: "結論から言えば、_______  _______  ___★___  _______ないかと思います。",
  //     options: ["あなたがたの", "間違って", "ほうでは", "いるのは"],
  //     correct: 0
  //   },
  //    {
  //     question: "この新しい_______  _______  ___★___  _______ものです。",
  //     options: ["機械は", "によって", "発明された", "科学者"],
  //     correct: 1
  //   },
  //    {
  //     question: "これから発表する内容は、10年以上_______  _______  ___★___  _______ものだ。",
  //     options: ["集めた", "もとづく", "かけて", "資料に"],
  //     correct: 3
  //   },
  //   //! 10 unit
  //    {
  //     question: "原田 「ずいぶん遅かったですね。どうしたんですか。」<br>内田 「もうしわけありません。_______  _______  ___★___  _______遅くなりました。」",
  //     options: ["事故で", "遅れた", "ものですから", "電車が"],
  //     correct: 1
  //   },
  //    {
  //     question: "今日は夏休みの初日だし、天気もいいし、どこでも_______  _______  ___★___  _______なあ。",
  //     options: ["から", "遊びに", "いい", "行きたい"],
  //     correct: 1
  //   },
  //    {
  //     question: "日本の有名な山と言われれば、富士山を_______  _______  ___★___  _______ないか。",
  //     options: ["多い", "人も", "思い出す", "のでは"],
  //     correct: 0
  //   },
  //    {
  //     question: "以前からの、社員の_______  _______  ___★___  _______社長は給料を上げた。",
  //     options: ["こたえる", "要求に", "形で", "強い"],
  //     correct: 0
  //   },
  //    {
  //     question: "昔は、飛行機がなかったので、_______  _______  ___★___  _______海外へ行きました。",
  //     options: ["船の旅を", "わたる", "数か月に", "して"],
  //     correct: 0
  //   },
  //   //! 11 unit
  //    {
  //     question: "きのうのゲームは______  _______  ___★___  _______、Aチームが勝った。",
  //     options: ["多くの", "予想に", "反して", "人々の"],
  //     correct: 1
  //   },
  //    {
  //     question: "よろしければ、______  _______  ___★___  _______どうぞ。",
  //     options: ["いただいた", "ものですが", "こちらの", "お菓子を"],
  //     correct: 2
  //   },
  //    {
  //     question: "山口 「では、このプロジェクトは、先日の______  _______  ___★___  _______でしょうか。」<br>中川 「そうですね、問題ないと思います。」",
  //     options: ["決まったように", "進めても", "会議で", "かまわない"],
  //     correct: 1
  //   },
  //    {
  //     question: "以前は毎日ピアノの練習をしていましたが、最近はしていないので、______  _______  ___★___  _______です。",
  //     options: ["下手に", "なる", "一方", "前より"],
  //     correct: 1
  //   },
  //    {
  //     question: "その村の人たちの_______  ___★___  _______  _______数十年間も続いた。",
  //     options: ["土地を", "なんと", "争いは", "めぐる"],
  //     correct: 0
  //   },
  //   //! 12 unit
  //    {
  //     question: "みなさまの______  _______  ___★___  _______思います。",
  //     options: ["こたえて", "一生けん命", "期待に", "がんばろうと"],
  //     correct: 1
  //   },
  //    {
  //     question: "お茶しか用意していませんが、先生がもし_______  ___★___  _______  _______、注文します。",
  //     options: ["でしたら", "お酒を", "めしあがりたい", "の"],
  //     correct: 2
  //   },
  //    {
  //     question: "加藤 「では、当日は、私もミーティングに参加していいですか。」<br>三上 「そのことなんですが、担当者に______  _______  ___★___  _______えないんですよ。」",
  //     options: ["なんとも", "ないと", "からで", "確かめて"],
  //     correct: 1
  //   },
  //    {
  //     question: "このまま治療をしないと、______  _______  ___★___  _______と医者に言われました。",
  //     options: ["かねない", "なり", "病気が", "悪く"],
  //     correct: 1
  //   },
  //    {
  //     question: "私が今、読んでいる本は、______  _______  ___★___  _______書かれている。",
  //     options: ["ある事件を", "有名な", "歴史上", "もとに"],
  //     correct: 0
  //   },
  //   //! 13 unit
  //    {
  //     question: "この報告書を作る_______  ___★___  _______  _______の期間は四か月だ。",
  //     options: ["かかった", "に", "ため", "調査"],
  //     correct: 1
  //   },
  //    {
  //     question: "今日の予定はこれで終わりましたが、______  _______  ___★___  _______ですか。",
  //     options: ["どう", "ご予定", "なさる", "これから"],
  //     correct: 2
  //   },
  //    {
  //     question: "会社にとって大事なこの仕事を、______  _______  ___★___  _______会社が倒産してしまう。",
  //     options: ["なにが", "成功させない", "なんでも", "と"],
  //     correct: 1
  //   },
  //    {
  //     question: "課長 「明日の夜、どこかに食事に行きませんか。」<br>部長 「明日は家族と______  _______  ___★___  _______ので、また今度さそってくれるかな。」",
  //     options: ["いる", "なって", "食事をする", "ことに"],
  //     correct: 1
  //   },
  //    {
  //     question: "ひさしぶりに東京へ遊びに______  _______  ___★___  _______買ってきた。",
  //     options: ["ほしかった", "ついでに", "行った", "服を"],
  //     correct: 0
  //   },
  //! 14 unit
  //  {
  //   question: "科学者の田中さんは、_______  _______  ___★___  _______ときどき食事をするのを忘れてしまう。",
  //   options: ["あまり", "なる", "夢中に", "研究に"],
  //   correct: 1
  // },
  //  {
  //   question: "大変そうですね。_______  ___★___  _______  _______いただけませんか。",
  //   options: ["させて", "お手伝いを", "よろしければ", "私で"],
  //   correct: 2
  // },
  //  {
  //   question: "前田 「すみません、明日のパーティーには急に参加できなくなりました。」<br>後藤 「えーっ、_______  _______  ___★___  _______楽しくありませんよ。」",
  //   options: ["いない", "パーティー", "なんて", "前田さんが"],
  //   correct: 1
  // },
  //  {
  //   question: "今日は1日天気が悪かったので、デートは_______  ___★___  _______  _______と後悔した。",
  //   options: ["よかった", "して", "明日に", "おけば"],
  //   correct: 1
  // },
  //  {
  //   question: "外国で仕事をする_______  _______  ___★___  _______教えてください。",
  //   options: ["べき", "気をつける", "際に", "点を"],
  //   correct: 0
  // },
  //! 15 unit
  //  {
  //   question: "連休に、海か山か_______  _______  ___★___  _______、みんなで海水浴に行った。",
  //   options: ["あげく", "なやんだ", "どちらに", "行くか"],
  //   correct: 1
  // },
  //  {
  //   question: "きのうの夜、先生_______  _______  ___★___  _______、みんなでお酒を飲みました。",
  //   options: ["後で", "お休みになった", "その", "が"],
  //   correct: 2
  // },
  //  {
  //   question: "子どものころ、_______  _______  ___★___  _______母にひどくしかられました。",
  //   options: ["けんかでも", "しょう", "ものなら", "友だちと"],
  //   correct: 1
  // },
  //  {
  //   question: "あの人は、スポーツ選手の_______  _______  ___★___  _______と思います。",
  //   options: ["わりに", "小さい", "体が", "ほうだ"],
  //   correct: 1
  // },
  //  {
  //   question: "番_______  ___★___  _______  _______習慣はありません。",
  //   options: ["ともかく", "なら", "そんな", "今は"],
  //   correct: 0
  // },
  // Добавь сюда больше вопросов!
];

// Перемешать массив
function shuffleArray(array) {
  return array.sort(() => Math.random() - 0.5);
}

// Выбрать 50 случайных вопросов (или все, если их меньше)
const selectedQuestions = shuffleArray(allQuestions).slice(0, 5);

const form = document.getElementById("quiz-form");
const resultDiv = document.getElementById("result");
const reviewDiv = document.getElementById("answers-review");
const submitBtn = document.getElementById("submit-btn");

// Таймер (10 минут)
let timeLeft = 600;
const timerElement = document.getElementById("timer");
const timerInterval = setInterval(() => {
  timeLeft--;
  const minutes = String(Math.floor(timeLeft / 60)).padStart(2, '0');
  const seconds = String(timeLeft % 60).padStart(2, '0');
  timerElement.textContent = `残り時間: ${minutes}:${seconds}`;

  if (timeLeft <= 0) {
    clearInterval(timerInterval);
    submitBtn.click();
  }
}, 1000);

// Создание формы
selectedQuestions.forEach((q, index) => {
  const block = document.createElement("div");
  block.className = "question-block";

  const questionId = `q${index}`;
  const shuffledOptions = shuffleArray([...q.options]);

  block.innerHTML = `<p><strong>${index + 1}. ${q.question}</strong></p>`;

  shuffledOptions.forEach((option, optIndex) => {
    const inputId = `${questionId}_opt${optIndex}`;
    block.innerHTML += `
      <label>
        <input type="radio" name="${questionId}" value="${option}">
        ${option}
      </label><br>`;
  });

  form.appendChild(block);
});

// Подсчет результатов
submitBtn.addEventListener("click", () => {
  clearInterval(timerInterval);
  let correct = 0;
  let wrong = 0;

  reviewDiv.innerHTML = "<h3>Сравнение ваших ответов с правильными:</h3>";

  selectedQuestions.forEach((q, index) => {
    const userAnswer = form[`q${index}`]?.value;
    const correctAnswer = q.options[q.correct];

    const resultText = document.createElement("div");
    resultText.innerHTML = `<strong>${index + 1}. ${q.question}</strong><br>
      Ваш ответ: <span class="${userAnswer === correctAnswer ? 'correct' : 'incorrect'}">${userAnswer || 'Нет ответа'}</span><br>
      Правильный ответ: <span class="correct">${correctAnswer}</span><hr>`;

    reviewDiv.appendChild(resultText);

    if (userAnswer === correctAnswer) {
      correct++;
    } else {
      wrong++;
    }
  });

  resultDiv.textContent = `正解: ${correct} 問中 ${selectedQuestions.length} 問`;

  submitBtn.disabled = true;
  document.querySelectorAll("input[type=radio]").forEach(input => input.disabled = true);
});
